(function(e){function t(t){for(var n,a,s=t[0],c=t[1],u=t[2],l=0,f=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var s=r[a];0!==o[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o={app:0},i=[];function s(e){return c.p+"js/"+({login:"login",settings:"settings"}[e]||e)+"."+{login:"a56c29e1",settings:"89746d90"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={settings:1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({login:"login",settings:"settings"}[e]||e)+"."+{login:"31d6cfe0",settings:"5b2d6e0c"}[e]+".css",o=c.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===o))return t()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){u=f[s],l=u.getAttribute("data-href");if(l===n||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete a[e],d.parentNode.removeChild(d),r(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",f.name="ChunkLoadError",f.type=n,f.request=a,r[1](f)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/Vue-InsideroViewer/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var d=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"405e":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("96cf");var n=r("1da1"),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("SiteNav"),r("router-view")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-sidebar",{attrs:{id:"sidebar-nav","backdrop-variant":"dark","no-close-on-route-change":"",title:"Insidero Viewer",shadow:""}},[[r("div",{staticClass:"p-2"},[r("b-button-group",{staticClass:"mt-1 ml-3"},e._l(e.propertyStates,(function(t){return r("b-button",{key:t.text,staticClass:"py-1 px-2",attrs:{variant:"outline-primary",pressed:t.value===e.$route.query.active||null==e.$route.query.type&&"all"===t.value},on:{click:function(r){return e.setLocation(null,null,t)}}},[e._v(" "+e._s(t.text)+" ")])})),1),r("b-button-group",{staticClass:"mt-2 ml-3"},e._l(e.propertyTypes,(function(t){return r("b-button",{key:t.text,staticClass:"py-1 px-2",attrs:{variant:"outline-primary",pressed:t.value===e.$route.query.type||null==e.$route.query.type&&"all"===t.value},on:{click:function(r){return e.setLocation(null,t,null)}}},[e._v(" "+e._s(t.text)+" ")])})),1),null!=e.userLocations?r("nav",{staticClass:"mt-4"},[r("b-nav",{attrs:{vertical:"",pills:""}},e._l(e.userLocations,(function(t){return r("b-nav-item",{key:t.city.value,attrs:{active:e.isLocationActive(t)},on:{click:function(r){return e.setLocation(t,null,null)}}},[e._v(" "+e._s(e.getLocationDisplayName(t))+" ")])})),1)],1):e._e(),r("hr",{staticClass:"my-3"}),e.isAuthenticated?r("nav",{staticClass:"mt-4"},[r("b-nav",{attrs:{vertical:"",pills:""}},[r("b-nav-item",{attrs:{to:{path:"settings"},active:"/settings"===e.$route.path}},[e._v(" Settings ")]),r("b-nav-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle:sidebar-nav",arg:"sidebar-nav"}],on:{click:function(t){return e.logout()}}},[e._v("Sign Out")])],1)],1):e._e()],1)]],2),r("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"primary"}},[e.hasLocations?r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-nav",modifiers:{"sidebar-nav":!0}}],staticClass:"mr-4",attrs:{variant:"outline-light"}},[r("b-icon",{attrs:{icon:"list"}})],1):e._e(),r("b-navbar-brand",{attrs:{to:{path:"/"}}},[e._v("Insidero Viewer")])],1)],1)},c=[],u=(r("99af"),r("4160"),r("b64b"),r("159b"),r("5530")),l=r("2f62"),f=r("2ef0"),d=r.n(f),p={data:function(){return{propertyTypes:[{text:"House",value:"house"},{text:"Flat",value:"flat"},{text:"Land",value:"land"},{text:"All",value:"all"}],propertyStates:[{text:"Active",value:"true"},{text:"Inactive",value:"false"},{text:"All",value:"all"}]}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["c"])(["userProfile"])),Object(l["b"])(["userLocations","isAuthenticated","isAnonymousUser"])),{},{hasLocations:function(){return!d.a.isEmpty(this.userLocations)}}),methods:{logout:function(){this.$store.dispatch("logout")},setLocation:function(e,t,r){var n,a=Object(u["a"])({},this.$route.query);null!=e&&(a.country=e.country.value,a.region=e.region.value,a.city=e.city.value,a.neighborhood=null===(n=e.neighborhood)||void 0===n?void 0:n.value);null!=t&&(a.type=t.value),null!=r&&(a.active=r.value),Object.keys(a).forEach((function(e){return null==a[e]&&delete a[e]})),this.$router.push({path:"/offers",query:a})},isLocationActive:function(e){var t,r,n,a,o=!0,i=this.$route.query;(i.country||e.country)&&(o=o&&(null===(t=e.country)||void 0===t?void 0:t.value)==this.$route.query.country);(i.region||e.region)&&(o=o&&(null===(r=e.region)||void 0===r?void 0:r.value)==this.$route.query.region);(i.city||e.city)&&(o=o&&(null===(n=e.city)||void 0===n?void 0:n.value)==this.$route.query.city);(i.neighborhood||e.neighborhood)&&(o=o&&(null===(a=e.neighborhood)||void 0===a?void 0:a.value)==this.$route.query.neighborhood);return o},getLocationDisplayName:function(e){return e.neighborhood?"".concat(e.city.text," -> ").concat(e.neighborhood.text):e.city?"".concat(e.city.text):e.region?"".concat(e.region.text):"".concat(e.country.text)}}},h=p,m=r("2877"),v=Object(m["a"])(h,s,c,!1,null,null,null),g=v.exports,b={name:"App",components:{SiteNav:g}},y=b,w=Object(m["a"])(y,o,i,!1,null,null,null),O=w.exports,k=(r("7db0"),r("c740"),r("d81d"),r("fb6a"),r("b0c0"),r("d3b7"),r("07ac"),r("ac1f"),r("25f0"),r("3ca3"),r("1276"),r("ddb0"),r("2b3d"),r("dc59")),x=(r("45fc"),r("8c4f")),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-modal",{attrs:{id:"modalEmbed",size:"xl","ok-only":"","hide-header":""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[null!=e.selectedOffer?r("b-button",{attrs:{variant:e.selectedOffer.archived?"dark":"outline-dark",size:"sm"},on:{click:function(t){return e.toggleArchive(e.selectedOffer)}}},[r("b-icon",{attrs:{icon:"archive"}})],1):e._e(),null!=e.selectedOffer?r("b-button",{attrs:{variant:e.selectedOffer.favorite?"primary":"outline-primary",size:"sm"},on:{click:function(t){return e.toggleFavorite(e.selectedOffer)}}},[r("b-icon",{attrs:{icon:"heart"}})],1):e._e(),null!=e.selectedOffer?r("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.closeModal()}}},[e._v(" OK ")]):e._e()]},proxy:!0}])},[r("b-embed",{attrs:{type:"iframe",aspect:"16by9",src:e.selectedOfferUrl,allowfullscreen:""}})],1),(e.favorites||[]).length>0?r("h5",{staticClass:"mt-4"},[e._v("Favorites")]):e._e(),(e.favorites||[]).length>0?r("OffersTable",{attrs:{fields:e.fields,offers:e.favorites}}):e._e(),(e.untagged||[]).length>0?r("h5",{staticClass:"mt-4"},[e._v("New")]):e._e(),(e.untagged||[]).length>0?r("OffersTable",{attrs:{fields:e.fields,offers:e.untagged}}):e._e(),(e.archived||[]).length>0?r("h5",{staticClass:"mt-4"},[e._v("Archived")]):e._e(),(e.archived||[]).length>0?r("OffersTable",{attrs:{fields:e.fields,offers:e.archived}}):e._e()],1)},j=[],R=(r("4de4"),r("5319"),r("b85c")),S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-table",{ref:"table",attrs:{items:e.offers,fields:e.fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,busy:e.offersLoading,selectable:"","select-mode":"single",small:"",hover:"",striped:"",stacked:"sm"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[r("b-link",{on:{click:function(r){return e.showEmbeddedPage(t.item)}}},[e._v(" "+e._s(t.item.id))])]}},{key:"cell(controls)",fn:function(t){return[r("b-button",{attrs:{size:"sm",variant:t.item.favorite?"primary":"outline-primary"},on:{click:function(r){return e.toggleFavorite(t.item)}}},[r("b-icon",{attrs:{icon:"heart"}})],1),r("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:t.item.archived?"dark":"outline-dark"},on:{click:function(r){return e.toggleArchive(t.item)}}},[r("b-icon",{attrs:{icon:"archive"}})],1),r("b-button",{staticClass:"ml-2",attrs:{size:"sm"},on:{click:function(r){return e.showDetails(t)}}},[e._v(" "+e._s(t.detailsShowing?"Less":"More")+" ")])]}},{key:"row-details",fn:function(t){return[r("b-row",[t.item.urls?r("b-col",{attrs:{cols:"12",sm:"6","no-gutters":""}},[r("b-card",[r("b-table",{attrs:{items:t.item.urls,fields:[{key:"url",name:"url",tdClass:"truncate"}]},scopedSlots:e._u([{key:"cell(url)",fn:function(t){return[r("b-link",{attrs:{target:"_blank",rel:"noopener noreferrer",href:""+t.value}},[e._v(e._s(t.value)+" ")])]}}],null,!0)})],1)],1):e._e(),t.item.prices?r("b-col",{attrs:{cols:"12",sm:"6","no-gutters":""}},[r("b-card",[r("b-table",{attrs:{items:t.item.prices,"thead-class":"hidden_header"}})],1)],1):e._e(),t.item.updates?r("b-col",{attrs:{cols:"12",sm:"6","no-gutters":""}},[r("b-card",[r("b-table",{attrs:{items:t.item.updates,"thead-class":"hidden_header"}})],1)],1):e._e(),r("b-col",{attrs:{cols:"12",sm:"6","no-gutters":""}},[r("b-card",[r("b-aspect",{attrs:{aspect:"10:7"}},[r("GmapMap",{staticStyle:{width:"100%",height:"100%"},attrs:{center:t.item.marker.position,zoom:11,options:{gestureHandling:"greedy"},"map-type-id":"terrain"}},[r("GmapMarker",{key:t.item.id,attrs:{position:t.item.marker.position}})],1)],1)],1)],1)],1)]}}])})},P=[],L=(r("c975"),{name:"OffersTable",props:{fields:{},offers:{}},computed:Object(u["a"])({},Object(l["b"])(["offersLoading"])),data:function(){return{sortBy:"updated",sortDesc:!0}},methods:{showDetails:function(e){e.toggleDetails(),this.$refs.table.selectRow(this.$refs.table.sortedItems.indexOf(e.item))},showEmbeddedPage:function(e){this.$refs.table.selectRow(this.$refs.table.sortedItems.indexOf(e)),this.$store.dispatch("setSelectedOffer",e)},toggleFavorite:function(e){var t=1===e.category?0:1;this.$store.dispatch("updateOfferCategory",{offer:e,category:t})},toggleArchive:function(e){var t=10===e.category?0:10;this.$store.dispatch("updateOfferCategory",{offer:e,category:t})}}}),A=L,C=(r("83ae"),Object(m["a"])(A,S,P,!1,null,null,null)),U=C.exports,$={name:"Offers",components:{OffersTable:U},data:function(){return{fields:[{key:"id",sortable:!1},{key:"current_price",sortable:!0,label:"Price"},{key:"published",sortable:!0},{key:"updated",sortable:!0},{key:"type",sortable:!1},{key:"rooms",sortable:!1},{key:"size",sortable:!0},{key:"land",sortable:!0},{key:"controls",sortable:!1,label:""}],selectedOfferUrl:""}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["c"])(["userProfile"])),Object(l["b"])(["offers","offersLoading","selectedOffer"])),{},{favorites:function(){return d.a.filter(this.offers,(function(e){return e.favorite}))},archived:function(){return d.a.filter(this.offers,(function(e){return e.archived}))},untagged:function(){return d.a.filter(this.offers,(function(e){return!e.favorite&&!e.archived}))}}),mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("fetchOffers",e.$route.query);case 2:case"end":return t.stop()}}),t)})))()},watch:{$route:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.$store.dispatch("fetchOffers",e.query);case 2:case"end":return t.stop()}}),t)})))()},userProfile:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t||this.offers){e.next=3;break}return e.next=3,this.$store.dispatch("fetchOffers",this.$route.query);case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),selectedOffer:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t){e.next=24;break}n=Object(R["a"])(t.urls),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=13;break}if(o=a.value,i=new URL(o.url),"sreality.cz"!==i.hostname.replace("www.","")){e.next=11;break}return this.selectedOfferUrl=o.url,this.$bvModal.show("modalEmbed"),e.abrupt("return");case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:window.open(t.urls[0].url,"_blank"),e.next=25;break;case 24:this.$bvModal.hide("modalEmbed");case 25:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})));function t(t,r){return e.apply(this,arguments)}return t}()},methods:{hasSelectedOfferMoreUrls:function(e){},getSelectedOfferSortedUrls:function(e){},navigateToSelectedOfferNextUrl:function(e){},toggleFavorite:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=1===e.category?0:1,r.next=3,t.$store.dispatch("updateOfferCategory",{offer:e,category:n});case 3:return r.next=5,t.closeModal();case 5:case"end":return r.stop()}}),r)})))()},toggleArchive:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=10===e.category?0:10,r.next=3,t.$store.dispatch("updateOfferCategory",{offer:e,category:n});case 3:return r.next=5,t.closeModal();case 5:case"end":return r.stop()}}),r)})))()},closeModal:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("setSelectedOffer",null);case 2:case"end":return t.stop()}}),t)})))()}}},E=$,q=Object(m["a"])(E,_,j,!1,null,null,null),I=q.exports;a["default"].use(x["a"]);var N=[{path:"/",name:"Dashboard",component:I,meta:{requiresAuth:!0}},{path:"/offers",name:"Dashboard",component:I,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:function(){return r.e("login").then(r.bind(null,"013f"))}},{path:"/settings",name:"settings",component:function(){return r.e("settings").then(r.bind(null,"b41f"))},meta:{requiresAuth:!0}}],M=new x["a"]({mode:"history",base:"/Vue-InsideroViewer/",routes:N});M.beforeEach((function(e,t,r){var n=e.matched.some((function(e){return e.meta.requiresAuth})),a=null!=k["a"].currentUser;if(!n||a)if("/"===e.path&&a)if(d.a.isEmpty(z.getters["userLocations"]))r("/settings");else{var o,i,s,c,u=z.getters["userLocations"][0];r({path:"/offers",query:{country:null===(o=u.country)||void 0===o?void 0:o.value,region:null===(i=u.region)||void 0===i?void 0:i.value,city:null===(s=u.city)||void 0===s?void 0:s.value,neighborhood:null===(c=u.neighborhood)||void 0===c?void 0:c.value}})}else if("/offers"!==e.path||e.query.active&&e.query.type)r();else{var l=e.query;l["active"]=l.active||"true",l["type"]=l.type||"house",r({path:e.path,query:l})}else r("/login")}));var D=r("bc3a"),T=r.n(D);a["default"].use(l["a"]);var z=new l["a"].Store({state:{userProfile:{},allRawOffers:{},rawOffers:{offers:{}},offersLoading:!1,selectedOffer:{},locationSearchCountries:[],locationSearchRegions:[],locationSearchCities:[],locationSearchNeighborhoods:[]},mutations:{setUserProfile:function(e,t){console.log("setting user profile:",t),a["default"].set(e,"userProfile",t)},setRawOffers:function(e,t){e.rawOffers=t},setSelectedOffer:function(e,t){e.selectedOffer=t},setOffersLoading:function(e,t){e.offersLoading=t},setLocationSearchCountries:function(e,t){a["default"].set(e,"locationSearchCountries",t)},setLocationSearchRegions:function(e,t){a["default"].set(e,"locationSearchRegions",t)},setLocationSearchCities:function(e,t){a["default"].set(e,"locationSearchCities",t)},setLocationSearchNeighborhoods:function(e,t){a["default"].set(e,"locationSearchNeighborhoods",t)}},actions:{signInAnonymously:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,t.next=3,k["a"].signInAnonymously();case 3:return n=t.sent,a=n.user,t.next=7,k["c"].doc(a.uid).set({apiKey:"",userLocations:[],offersHistory:[]});case 7:r("fetchUserProfile",a);case 8:case"end":return t.stop()}}),t)})))()},signInWithEmailAndPassword:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,r.next=3,k["a"].signInWithEmailAndPassword(t.email,t.password);case 3:a=r.sent,o=a.user,n("fetchUserProfile",o);case 6:case"end":return r.stop()}}),r)})))()},signUpWithEmailAndPassword:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,r.next=3,k["a"].createUserWithEmailAndPassword(t.email,t.password);case 3:return a=r.sent,o=a.user,r.next=7,k["c"].doc(o.uid).set({apiKey:"",userLocations:[],offersHistory:[]});case 7:n("fetchUserProfile",o);case 8:case"end":return r.stop()}}),r)})))()},createAccountForAnonymousUser:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=k["b"].EmailAuthProvider.credential(t.email,t.password),r.next=4,k["a"].currentUser.linkWithCredential(a);case 4:o=r.sent,i=o.user,n("fetchUserProfile",i);case 7:case"end":return r.stop()}}),r)})))()},changeUserPassword:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.dispatch,e.state,n=k["b"].EmailAuthProvider.credential(k["a"].currentUser.email,t.currentPassword),r.next=4,k["a"].currentUser.reauthenticateWithCredential(n);case 4:case"end":return r.stop()}}),r)})))()},fetchUserProfile:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,k["c"].doc(t.uid).get();case 3:if(a=r.sent,o=k["a"].currentUser,n("setUserProfile",Object(u["a"])(Object(u["a"])({},a.data()),{},{isAnonymous:o.isAnonymous})),"/login"!==M.currentRoute.path){r.next=9;break}return r.next=9,M.push("/");case 9:case"end":return r.stop()}}),r)})))()},logout:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,k["a"].signOut();case 3:return r("setUserProfile",{}),t.next=6,M.push("/login");case 6:case"end":return t.stop()}}),t)})))()},updateProfile:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=k["a"].currentUser.uid,r.next=4,k["c"].doc(a).update(t);case 4:r.sent,n("fetchUserProfile",{uid:a});case 6:case"end":return r.stop()}}),r)})))()},setSelectedOffer:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,n("setSelectedOffer",t);case 2:case"end":return r.stop()}}),r)})))()},updateOfferCategory:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=e.state,o=a.userProfile.offersHistory||[],i={offerId:t.offer.id,category:t.category},s=o.findIndex((function(e){return e.offerId===i.offerId})),-1===s?o.push(i):o[s]=i,r.next=7,n("updateProfile",{offersHistory:o});case 7:case"end":return r.stop()}}),r)})))()},fetchOffers:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.commit,o=e.state,null==t||null===(n=o.userProfile)||void 0===n||!n.apiKey){r.next=17;break}return a("setOffersLoading",!0),i={api_key:o.userProfile.apiKey,country:t.country,region:t.region,city:t.city,neighborhood:t.neighborhood,type:"all"===t.type?null:t.type,active:"all"===t.active?null:t.active,offer:"sell"},Object.keys(i).forEach((function(e){return null==i[e]&&delete i[e]})),s=new URLSearchParams(i).toString(),c="/offers?"+s,console.log("Fetching offers from: ",c),r.prev=8,r.next=11,T.a.get(c);case 11:u=r.sent,console.log("New offers received: ",Object.keys(u["data"]["results"]).length),a("setRawOffers",{offers:u["data"]["results"]});case 14:return r.prev=14,a("setOffersLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[8,,14,17]])})))()},fetchCountries:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.state,t.next=3,F("/countries",{api_key:n.userProfile.apiKey});case 3:a=t.sent,a&&r("setLocationSearchCountries",a);case 5:case"end":return t.stop()}}),t)})))()},fetchRegions:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.next=3,F("/regions",Object(u["a"])({api_key:a.userProfile.apiKey},t));case 3:o=r.sent,o&&n("setLocationSearchRegions",o);case 5:case"end":return r.stop()}}),r)})))()},fetchCities:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.next=3,F("/cities",Object(u["a"])({api_key:a.userProfile.apiKey},t));case 3:o=r.sent,o&&n("setLocationSearchCities",o);case 5:case"end":return r.stop()}}),r)})))()},fetchNeighborhoods:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.next=3,F("/neighborhoods",Object(u["a"])({api_key:a.userProfile.apiKey},t));case 3:o=r.sent,o&&n("setLocationSearchNeighborhoods",o);case 5:case"end":return r.stop()}}),r)})))()}},getters:{userLocations:function(e){var t;return null===(t=e.userProfile)||void 0===t?void 0:t.userLocations},offersLoading:function(e){return e.offersLoading},selectedOffer:function(e){return e.selectedOffer},isAuthenticated:function(e){return null!=e.userProfile&null!=k["a"].currentUser},isAnonymousUser:function(e){return null!=e.userProfile&k["a"].currentUser.isAnonymous},offers:function(e){var t,r;return null!==(t=e.userProfile)&&void 0!==t&&t.offersHistory&&null!==(r=e.rawOffers)&&void 0!==r&&r.offers?K(Object.values(e.rawOffers.offers),e.userProfile.offersHistory):[]}}});function F(e,t){return B.apply(this,arguments)}function B(){return B=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object.keys(r).forEach((function(e){return null==r[e]&&delete r[e]})),n=new URLSearchParams(r).toString(),e.next=4,T.a.get(t+"?"+n);case 4:return a=e.sent,e.abrupt("return",Object.values(a.data.results).map((function(e){return{value:e["general"]["id"],text:e["general"]["name"]}})));case 6:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function K(e,t){return e.map((function(e){var r,n,a,o=e["general"]["id"],i=e["general"]["subtype"]||e["general"]["type"];"commercial"===i?i="comm":"parkingSpot"===i&&(i="parking");var s=e["price"],c=s?"".concat(s["current"]," ").concat(s["currency"]):"",u=s?s["max"]-s["current"]:null,l=u?"(-".concat(Math.round(u/s["max"]*1e3)/10,"%)"):"",f=s?[{type:"Min",price:"".concat(s["min"]," ").concat(s["currency"])},{type:"Max",price:"".concat(s["max"]," ").concat(s["currency"])},{type:"Current",price:"".concat(c," ").concat(l)},{type:"PSQ",price:"".concat(s["perSquareMeter"]," ").concat(s["currency"])}]:null,d=e["events"],p=d?d["visibility"]["0"]["date"]:null,h=d?d["visibility"].slice(-1)[0]["date"]:null,m=d&&d["dataUpdates"]?d["dataUpdates"].map((function(e){return{date:e.date,type:e.type,value:"".concat(e.value.old," -> ").concat(e.value.new)}})):null,v=e["space"],g=(null===v||void 0===v||null===(r=v.room)||void 0===r?void 0:r.full)||"",b=null!==v&&void 0!==v&&v.room?"".concat((null===v||void 0===v||null===(n=v.room)||void 0===n?void 0:n.min)||"","/").concat((null===v||void 0===v||null===(a=v.room)||void 0===a?void 0:a.max)||"","/").concat(g):null,y=null!==v&&void 0!==v&&v.usable?"".concat(v["usable"]["min"],"m2"):null,w=null!==v&&void 0!==v&&v.land?"".concat(v["land"]["min"],"m2"):null,O=e["geography"]?e["geography"]["coordinates"][0]:null,k=O?{lat:parseFloat(O.split(",")[0]),lng:parseFloat(O.split(",")[1])}:null,x=k?{id:o,position:k}:null,_=t.find((function(e){return e.offerId===o})),j=(null===_||void 0===_?void 0:_.category)||0,R=e["general"]["url"].map((function(e){return{url:e}}));return{id:o,current_price:c,published:p,updated:h,updates:m,type:i,rooms:b,size:y,land:w,category:j,favorite:1===j,archived:10===j,prices:f,marker:x,urls:R}}))}var H,V=r("1923"),Z=r("5f5b"),W=r("b1e0"),G=(r("de82"),r("9955")),J=r.n(G);a["default"].use(Z["a"]),a["default"].use(W["a"]),a["default"].use(V,{load:{key:"AIzaSyCtiAvXQRc_1hDv23u9DGk-ZweUZw-eyHg"}}),T.a.defaults.baseURL="https://api.insidero.com/v3",T.a.defaults.timeout=3e4,a["default"].use(J.a,{lodash:d.a}),a["default"].config.productionTip=!1,k["a"].onAuthStateChanged(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,z.dispatch("fetchUserProfile",t);case 3:H||(H=new a["default"]({router:M,store:z,render:function(e){return e(O)}}).$mount("#app"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},"83ae":function(e,t,r){"use strict";r("405e")},dc59:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c}));var n=r("260b"),a=(r("ea7b"),r("e71f"),{apiKey:"AIzaSyBZwhyuBZh0IpaZRSIv5N0FFYqCtZBSMVE",authDomain:"insideroviewer.firebaseapp.com",projectId:"insideroviewer",storageBucket:"insideroviewer.appspot.com",messagingSenderId:"72743309203",appId:"1:72743309203:web:01134561f8400403082266",measurementId:"G-PT3FG19EPZ"});n["a"].initializeApp(a);var o=n["a"].firestore(),i=n["a"].auth(),s=n["a"].auth,c=o.collection("users")},de82:function(e,t,r){}});
//# sourceMappingURL=app.483cda17.js.map